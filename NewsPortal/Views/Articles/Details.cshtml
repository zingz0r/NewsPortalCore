@using NewsPortal.Services
@model NewsPortal.Entity.Article
@inject ImageService ImageService

@{
    ViewData["Title"] = "Details";
}

<h2>Details</h2>

<div>
    <h4>Article</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.Title)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.Title)
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.Summary)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.Summary)
        </dd>
        <dt>
            Image
        </dt>
        <dd>
            @{
                bool isFirstShowed = false;
                foreach (var item in ImageService.GetPictureIdsForAnArticle(Model.Id))
                {
                    if (!isFirstShowed)
                    {
                        isFirstShowed = true;

                        <a href="@Url.Action("GetImage", "Manager", new { id = item, isLarge = true })" data-lightbox="@Model.Id" class="col-sm-4">
                            <img src="@Url.Action("GetImage", "Manager", new {id = item, isLarge = false})" class="img-fluid" alt="" />
                        </a>
                    }
                    else
                    {
                        <a href="@Url.Action("GetImage", "Manager", new {id = item, isLarge = true})" data-lightbox="@Model.Id" class="col-sm-4"></a>
                    }
                }
            }

        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.Text)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.Text)
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.Date)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.Date)
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.IsFeatured)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.IsFeatured)
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.Author)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.Author.Name)
        </dd>
    </dl>
</div>
<div>
    <a asp-action="Edit" asp-route-id="@Model.Id">Edit</a> |
    <a asp-action="Index">Back to List</a>
</div>

@section Scripts
{
    <script>
        lightbox.option({
            'resizeDuration': 200,
            'wrapAround': true
        })
    </script>
}